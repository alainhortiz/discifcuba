{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('easyadmin/plugins/multiselect/css/multi-select.css') }}"/>
    <link rel="stylesheet" href="{{ asset('easyadmin/tema/DataTables-1.10.10/media/css/jquery.dataTables.css') }}"/>
{% endblock %}

{% block body %}
    <!-- Alerta -->
    <div class="preload hidden">
        <div class="logo"></div>
        <div class="loader-frame">
            <div class="loader1" id="loader1"></div>
            <div class="loader2" id="loader2"></div>
        </div>
    </div>
    <!-- Header -->
    <div class="header bg-gradient-red-right pb-6">
        <div class="container-fluid">
            <div class="header-body">
                <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                    <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                        <li class="breadcrumb-item"><a href="{{ path('inicio') }}">Inicio</a></li>
                        <li class="breadcrumb-item"><a href="{{ path('gestionarEncuestas') }}">Encuestas</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Modificar Encuesta
                            CI: {{ encuesta.persona.carnetIdentidad ~ ' - ' ~ encuesta.persona.nombreCompleto() }} </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <!-- Page content -->
    <div class="container-fluid mt--6">
        <form>
            <div class="row justify-content-center">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <!-- Tabs with icons -->
                    <div class="nav-wrapper">
                        <ul class="nav nav-pills nav-fill flex-column flex-md-row" id="tabs-icons-text"
                            role="tablist">
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0 active" id="tabs-icons-text-1-tab"
                                   data-toggle="tab" href="#tabs-icons-text-1" role="tab"
                                   aria-controls="tabs-icons-text-1" aria-selected="true"><i
                                            class="ni ni-single-02 mr-2"></i>Datos Generales</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-2-tab"
                                   data-toggle="tab" href="#tabs-icons-text-2" role="tab"
                                   aria-controls="tabs-icons-text-2" aria-selected="false"><i
                                            class="ni ni-single-02 mr-2"></i>Diagnóstico</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-3-tab"
                                   data-toggle="tab" href="#tabs-icons-text-3" role="tab"
                                   aria-controls="tabs-icons-text-3" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D1</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-4-tab"
                                   data-toggle="tab" href="#tabs-icons-text-4" role="tab"
                                   aria-controls="tabs-icons-text-4" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D2</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-5-tab"
                                   data-toggle="tab" href="#tabs-icons-text-5" role="tab"
                                   aria-controls="tabs-icons-text-5" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D3</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-6-tab"
                                   data-toggle="tab" href="#tabs-icons-text-6" role="tab"
                                   aria-controls="tabs-icons-text-6" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D4</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-7-tab"
                                   data-toggle="tab" href="#tabs-icons-text-7" role="tab"
                                   aria-controls="tabs-icons-text-7" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D5</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-8-tab"
                                   data-toggle="tab" href="#tabs-icons-text-8" role="tab"
                                   aria-controls="tabs-icons-text-8" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D6</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-9-tab"
                                   data-toggle="tab" href="#tabs-icons-text-9" role="tab"
                                   aria-controls="tabs-icons-text-9" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D7</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-10-tab"
                                   data-toggle="tab" href="#tabs-icons-text-10" role="tab"
                                   aria-controls="tabs-icons-text-10" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D8</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-11-tab"
                                   data-toggle="tab" href="#tabs-icons-text-11" role="tab"
                                   aria-controls="tabs-icons-text-11" aria-selected="false"><i
                                            class="fa fa-question mr-2"></i>D9</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-11-tab"
                                   data-toggle="tab" href="#tabs-icons-text-12" role="tab"
                                   aria-controls="tabs-icons-text-12" aria-selected="false"><i
                                            class="fa fa-users mr-2"></i>Entrevistadores</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card shadow">
                        <div class="card-body" style="background: #ffffff">
                            <div class="tab-content" id="myTabContent">
                                {# Datos generales #}
                                <div class="tab-pane fade show active" id="tabs-icons-text-1"
                                     role="tabpanel" aria-labelledby="tabs-icons-text-1-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="row">
                                                <div class="col-md-12 col-12">
                                                    <div class="form-group">
                                                        <h2 class="card-title text-dark font-weight-bold mb-4">
                                                            DATOS
                                                            GENERALES</h2>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3 col-12">
                                                    <div class="form-group">
                                                     <span class="mb-2">Edad cumplida: <span
                                                                 class="text-dark font-weight-bold" id="edad"
                                                                 name="edad">{{ encuesta.edad }}</span></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-5 col-12">
                                                    <div class="form-group">
                                                    <span class="mb-2">Fecha de
                                                                        nacimiento: <span
                                                                class="text-dark font-weight-bold" id="fechaNacimiento"
                                                                name="fechaNacimiento">{{ encuesta.persona.fechaNacimiento|date('d-m-Y') }}</span></span>

                                                    </div>
                                                </div>
                                                <div class="col-md-4 col-12">
                                                    <div class="form-group">
                                                    <span class="mb-2">Sexo: <span
                                                                class="text-dark font-weight-bold" id="sexo"
                                                                name="sexo">{{ encuesta.persona.sexo }}</span></span>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="fechaValoracion">Fecha de
                                                        valoración</label><input type="date"
                                                                                 class="form-control"
                                                                                 min="2020-01-01"
                                                                                 step="1"
                                                                                 id="fechaValoracion"
                                                                                 name="fechaValoracion"
                                                                                 value="{{ encuesta.fechaValoracion|date('Y-m-d') }}">
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="provinciaPoliclinico">Provincia</label>
                                                    <select
                                                            class="form-control"
                                                            id="provinciaPoliclinico"
                                                            name="provinciaPoliclinico">
                                                        <option value="{{ encuesta.policlinico.municipio.provincia.id }}">{{ encuesta.policlinico.municipio.provincia.nombre }}</option>
                                                        {% for provincia in  provincias %}
                                                            <option value="{{ provincia.id }}">{{ provincia.nombre }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="municipioPoliclinico">Municipio</label>
                                                    <select
                                                            class="form-control"
                                                            id="municipioPoliclinico"
                                                            name="municipioPoliclinico">
                                                        <option id="inicioMunicipioPol"
                                                                value="{{ encuesta.policlinico.municipio.id }}">{{ encuesta.policlinico.municipio.nombre }}</option>
                                                        {% for municipio in  municipios if municipio.provincia.id == encuesta.policlinico.municipio.provincia.id %}
                                                            <option value="{{ municipio.id }}">{{ municipio.nombre }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="policlinico">Policlínico</label>
                                                    <select
                                                            class="form-control" id="policlinico"
                                                            name="policlinico">
                                                        <option id="inicioPol"
                                                                value="{{ encuesta.policlinico.id }}">{{ encuesta.policlinico.nombre }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="nombre">Nombre</label>
                                                    <input type="text" class="form-control"
                                                           id="nombre"
                                                           name="nombre"
                                                           value="{{ encuesta.persona.nombre }}"
                                                           onkeypress="return soloLetras(event)">
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="primerApellido">Primer Apellido</label>
                                                    <input type="text" class="form-control"
                                                           id="primerApellido"
                                                           name="primerApellido"
                                                           value="{{ encuesta.persona.primerApellido }}"
                                                           onkeypress="return soloLetras(event)">
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="segundoApellido">Segundo
                                                        Apellido</label>
                                                    <input type="text" class="form-control"
                                                           id="segundoApellido"
                                                           name="segundoApellido"
                                                           value="{{ encuesta.persona.segundoApellido }}"
                                                           onkeypress="return soloLetras(event)">
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="genero">Género</label>
                                                    <select
                                                            class="form-control" id="genero"
                                                            name="genero">
                                                        <option value="{{ encuesta.genero }}">{{ encuesta.genero }}</option>
                                                        <option value="Hombre">Hombre</option>
                                                        <option value="Mujer">Mujer</option>
                                                        <option value="Otro">Otro</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class=" row">
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="estadoCivil">Estado civil</label>
                                                    <select
                                                            class="form-control" id="estadoCivil"
                                                            name="estadoCivil">
                                                        <option value="{{ encuesta.estadoCivil.id }}">{{ encuesta.estadoCivil.nombre }}</option>
                                                        {% for estado in  estadosCiviles %}
                                                            <option value="{{ estado.id }}">{{ estado.nombre }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="provinciaResidencia">Provincia de
                                                        residencia</label>
                                                    <select
                                                            class="form-control"
                                                            id="provinciaResidencia"
                                                            name="provinciaResidencia">
                                                        <option value="{{ encuesta.muncipioResidencia.provincia.id }}">{{ encuesta.muncipioResidencia.provincia.nombre }}</option>
                                                        {% for provincia in  provincias %}
                                                            <option value="{{ provincia.id }}">{{ provincia.nombre }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3 col-12">
                                                <div class="form-group">
                                                    <label for="municipioResidencia">Municipio de
                                                        residencia</label>
                                                    <select
                                                            class="form-control"
                                                            id="municipioResidencia"
                                                            name="municipioResidencia">
                                                        <option id="inicioMunResid"
                                                                value="{{ encuesta.muncipioResidencia.id }}">{{ encuesta.muncipioResidencia.nombre }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12 col-12 pr-1">
                                                <div class="form-group">
                                                    <label class="control-label "
                                                           for="multi-empleos"><strong>Empleo(s)
                                                            actual(es)
                                                            :</strong></label>
                                                    <select multiple="multiple" id="multi-empleos"
                                                            name="multi-empleos"
                                                            class="form-control">
                                                        {% for empleo in empleos %}
                                                            {% if not (empleo in encuesta.getEncuestaEmpleos()) %}
                                                                <option value={{ empleo.id }}>{{ empleo.nombre }}</option>
                                                            {% endif %}
                                                        {% endfor %}
                                                        {% for empleo in encuesta.getEncuestaEmpleos() %}
                                                            <option class="misEmpleos"
                                                                    value={{ empleo.id }}>{{ empleo.nombre }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# Diagnóstico #}
                                <div class="tab-pane fade" id="tabs-icons-text-2" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-2-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">
                                                DIAGNÓSTICO</h2>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-lg-12 col-12 pr-1">
                                                    <div class="form-group">
                                                        <label class="control-label "
                                                               for="multi-grados"><strong>Grado de
                                                                independencia:</strong></label>
                                                        <select multiple="multiple" id="multi-grados"
                                                                name="multi-grados"
                                                                class="form-control">
                                                            {% for grado in grados %}
                                                                {% if not (grado in encuesta.getEncuestaGrados()) %}
                                                                    <option value={{ grado.id }}>{{ grado.nombre }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            {% for grado in encuesta.getEncuestaGrados() %}
                                                                <option class="misGrados"
                                                                        value={{ grado.id }}>{{ grado.nombre }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-12 pr-1">
                                                    <div class="form-group">
                                                        <label class="control-label "
                                                               for="multi-factores"><strong>Factores de
                                                                riesgo:</strong></label>
                                                        <select multiple="multiple" id="multi-factores"
                                                                name="multi-factores"
                                                                class="form-control">
                                                            {% for factor in factores %}
                                                                {% if not (factor in encuesta.getEncuestaRiesgos()) %}
                                                                    <option value={{ factor.id }}>{{ factor.nombre }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            {% for factor in encuesta.getEncuestaRiesgos() %}
                                                                <option class="misFactores"
                                                                        value={{ factor.id }}>{{ factor.nombre }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-12 pr-1">
                                                    <div class="form-group">
                                                        <label class="control-label "
                                                               for="multi-diagnosticos"><strong>Diagnóstico
                                                                médico de
                                                                las
                                                                principales condiciones de
                                                                salud:</strong></label>
                                                        <select multiple="multiple"
                                                                id="multi-diagnosticos"
                                                                name="multi-diagnosticos"
                                                                class="form-control">
                                                            {% for diagnostico in diagnosticos %}
                                                                {% if not (diagnostico in encuesta.getEncuestaDiagnosticos()) %}
                                                                    <option value={{ diagnostico.id }}>{{ diagnostico.nombre }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            {% for diagnostico in encuesta.getEncuestaDiagnosticos() %}
                                                                <option class="misDiagnosticos"
                                                                        value={{ diagnostico.id }}>{{ diagnostico.nombre }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-12 pr-1">
                                                    <div class="form-group">
                                                        <label class="control-label "
                                                               for="multi-sistemas"><strong>Sistemas
                                                                afectados:</strong></label>
                                                        <select multiple="multiple" id="multi-sistemas"
                                                                name="multi-sistemas"
                                                                class="form-control">
                                                            {% for sistema in sistemas %}
                                                                {% if not (sistema in encuesta.getEncuestaSistemas()) %}
                                                                    <option value={{ sistema.id }}>{{ sistema.nombre }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            {% for sistema in encuesta.getEncuestaSistemas() %}
                                                                <option class="misSistemas"
                                                                        value={{ sistema.id }}>{{ sistema.nombre }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-12 pr-1">
                                                    <div class="form-group">
                                                        <label class="control-label "
                                                               for="multi-funciones"><strong>Funciones
                                                                afectadas:</strong></label>
                                                        <select multiple="multiple" id="multi-funciones"
                                                                name="multi-funciones"
                                                                class="form-control">
                                                            {% for funcion in funciones %}
                                                                {% if not (funcion in encuesta.getEncuestaFunciones()) %}
                                                                    <option value={{ funcion.id }}>{{ funcion.nombre }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            {% for funcion in encuesta.getEncuestaFunciones() %}
                                                                <option class="misSistemas"
                                                                        value={{ funcion.id }}>{{ funcion.nombre }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d1 #}
                                <div class="tab-pane fade" id="tabs-icons-text-3" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-3-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D1.
                                                APRENDIZAJE Y
                                                APLICACIÓN DEL
                                                CONOCIMIENTO</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD1">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% set no = 0 %}
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd1' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD1{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD1{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD1{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD1{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD1{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD1{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD1{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD1{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD1{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD1{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px" type="radio"
                                                                           name="radioD1{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD1{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d2 #}
                                <div class="tab-pane fade" id="tabs-icons-text-4" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-4-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D2.
                                                TAREAS Y
                                                DEMANDAS
                                                GENERALES</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD2">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd2' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD2{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD2{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD2{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD2{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD2{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD2{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD2{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD2{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD2{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD2{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD2{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD2{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d3 #}
                                <div class="tab-pane fade" id="tabs-icons-text-5" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-5-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D3.
                                                CONVERSACIÓN Y
                                                UTILIZACIÓN DE
                                                APARATOS Y TÉCNICAS DE COMUNICACIÓN</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD3">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd3' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD3{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD3{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD3{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD3{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD3{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD3{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD3{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD3{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD3{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD3{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD3{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD3{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d4 #}
                                <div class="tab-pane fade" id="tabs-icons-text-6" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-6-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D4.
                                                MOVILIDAD</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD4">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd4' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD4{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD4{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD4{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD4{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD4{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD4{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD4{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD4{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD4{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD4{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD4{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD4{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d5 #}
                                <div class="tab-pane fade" id="tabs-icons-text-7" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-7-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D5.
                                                AUTOCUIDADO</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD5">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd5' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD5{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD5{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD5{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD5{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD5{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD5{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD5{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD5{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD5{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD5{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD5{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD5{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d6 #}
                                <div class="tab-pane fade" id="tabs-icons-text-8" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-8-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D6.
                                                TAREAS
                                                DEL
                                                HOGAR</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD6">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd6' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD6{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD6{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD6{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD6{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD6{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD6{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD6{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD6{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD6{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD6{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD6{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD6{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d7 #}
                                <div class="tab-pane fade" id="tabs-icons-text-9" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-9-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D7.
                                                INTERACCIONES Y
                                                RELACIONES
                                                INTERPERSONALES</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD7">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd7' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD7{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD7{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD7{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD7{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD7{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD7{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD7{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD7{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD7{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD7{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD7{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD7{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d8 #}
                                <div class="tab-pane fade" id="tabs-icons-text-10" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-10-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D8.
                                                ÁREAS
                                                PRINCIPALES
                                                DE LA VIDA. TRABAJO
                                                Y EMPLEO</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD8">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd8' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD8{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD8{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD8{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD8{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD8{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD8{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD8{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD8{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD8{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD8{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD8{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD8{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# d9 #}
                                <div class="tab-pane fade" id="tabs-icons-text-11" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-11-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">D9.
                                                VIDA
                                                COMUNITARIA</h2>
                                        </div>
                                        <div class="card-body">
                                            <h3 class="card-title text-gray font-weight-bold mb-4">¿En
                                                los
                                                últimos 30
                                                días
                                                cuanta dificultad ha tenido (diga el nombre) para</h3>
                                            <!-- Light table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center table-flush"
                                                       id="dataD9">
                                                    <thead style="background: #272934;color: white">
                                                    <tr>
                                                        <th scope="col" class="hidden">id</th>
                                                        <th scope="col" class="text-center">No.</th>
                                                        <th scope="col">Pregunta</th>
                                                        <th scope="col" class="text-center">Opciones de
                                                            respuesta
                                                        </th>
                                                        <th scope="col" class="text-center">Código
                                                            CIF-IA-IA
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list">
                                                    {% for pregunta in encuesta.getPreguntas() if pregunta.pregunta.tipoDominio.codigo == 'd9' %}
                                                        {% set no = no + 1 %}
                                                        <tr data-id="{{ pregunta.pregunta.id }}">
                                                            <td class="hidden">{{ pregunta.pregunta.id }}</td>
                                                            <td class="text-center">{{ no }}</td>
                                                            <td>{{ pregunta.pregunta.nombre }}</td>
                                                            <div class="form-group">
                                                                <td class="text-center">
                                                                    <input
                                                                           type="radio"
                                                                           name="radioD9{{ pregunta.pregunta.id }}"
                                                                           value="0" {{ (pregunta.respuesta == '0') ? 'checked' }}>
                                                                    <label for="radioD9{{ pregunta.pregunta.id }}">No
                                                                        lo
                                                                        puede
                                                                        hacer</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD9{{ pregunta.pregunta.id }}"
                                                                           value="1" {{ (pregunta.respuesta == '1') ? 'checked' }}>
                                                                    <label for="radioD9{{ pregunta.pregunta.id }}">Severa</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD9{{ pregunta.pregunta.id }}"
                                                                           value="2" {{ (pregunta.respuesta == '2') ? 'checked' }}>
                                                                    <label for="radioD9{{ pregunta.pregunta.id }}">Moderada</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD9{{ pregunta.pregunta.id }}"
                                                                           value="3" {{ (pregunta.respuesta == '3') ? 'checked' }}>
                                                                    <label for="radioD9{{ pregunta.pregunta.id }}">Leve</label>

                                                                    <input style="margin-left: 20px"
                                                                           type="radio"
                                                                           name="radioD9{{ pregunta.pregunta.id }}"
                                                                           value="4" {{ (pregunta.respuesta == '4') ? 'checked' }}>
                                                                    <label for="radioD9{{ pregunta.pregunta.id }}">Ninguna</label>

                                                                    <input style="margin-left: 20px"
                                                                            type="radio"
                                                                           name="radioD9{{ pregunta.pregunta.id }}"
                                                                           value="-1" {{ (pregunta.respuesta == '-1') ? 'checked' }}>
                                                                    <label for="radioD9{{ pregunta.pregunta.id }}">No
                                                                        Aplica</label>
                                                                </td>
                                                            </div>
                                                            <td class="text-center">
                                                                <strong>{{ pregunta.pregunta.codigo }}</strong>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {# Entrevistadores #}
                                <div class="tab-pane fade" id="tabs-icons-text-12" role="tabpanel"
                                     aria-labelledby="tabs-icons-text-12-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title text-dark font-weight-bold mb-4">
                                                ENTREVISTADORES</h2>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-lg-12 col-12 pr-1">
                                                    <div class="form-group">
                                                        <label class="control-label "
                                                               for="multi-funciones"><strong>Entrevistadores:</strong></label>
                                                        <select multiple="multiple"
                                                                id="multi-entrevistadores"
                                                                name="multi-entrevistadores"
                                                                class="form-control">
                                                            {% for entrevistador in entrevistadores if entrevistador.id != app.user.id %}
                                                                {% if not (entrevistador in encuesta.getEncuestaEntrevistadores())  and  not ('ROLE_SUPERUSUARIO' in entrevistador.getUsuarioRoles()) %}
                                                                    <option value={{ entrevistador.id }}>{{ entrevistador.nombresCompletos() }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                            {% for entrevistador in encuesta.getEncuestaEntrevistadores() %}
                                                                <option class="misEntrevistadores"
                                                                        value={{ entrevistador.id }}>{{ entrevistador.nombresCompletos() }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {# guardar #}
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="card card-user">
                            <div class="card-body">
                                <form>
                                    <div class="row justify-content-center">
                                        <div class="row">
                                            <div class="update ml-auto mr-auto">
                                                <button type="button" class="btn btn-round text-white"
                                                        style="background-color: #303132"
                                                        id="btnGuardar"
                                                        data-toggle="tooltip"
                                                        data-placement="top"
                                                        title="Guardar el proyecto">Aceptar
                                                </button>
                                                <button type="button"
                                                        class="btn btn-link text-dark btn-round"
                                                        id="btnCancelar"
                                                        data-toggle="tooltip"
                                                        data-placement="top"
                                                        title="Salir">Cancelar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        {% block footer %}
            {{ parent() }}
        {% endblock %}
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('easyadmin/plugins/multiselect/js/jquery.multi-select.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/quicksearch/src/jquery.quicksearch.js') }}"></script>
    <script src="{{ asset('easyadmin/tema/DataTables-1.10.10/media/js/jquery.dataTables.js') }}"></script>
    <script>
        $(document).ready(function () {

            //Roles y permisos de la page
            {
                (function () {
                    {% if not (is_granted("ROLE_SUPERUSUARIO") or is_granted("ROLE_ADMINISTRADOR") or is_granted("ROLE_ENTREVISTADOR")) %}
                    window.location.href = "{{ path('login') }}";
                    {% endif %}
                })();
            }

            //Declaraciones
            {
                //Componentes
                $('#multi-empleos, #multi-grados, #multi-factores, #multi-diagnosticos, #multi-sistemas, #multi-funciones').multiSelect();

                $('#multi-entrevistadores').multiSelect({
                    selectableHeader: "<input type='text' class='search-input input-lg' autocomplete='off' placeholder='Buscar...'>",
                    selectionHeader: "<input type='text' class='search-input input-lg' autocomplete='off' placeholder='Buscar...'>",
                    afterInit: function (ms) {
                        var that = this,
                            $selectableSearch = that.$selectableUl.prev(),
                            $selectionSearch = that.$selectionUl.prev(),
                            selectableSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selectable:not(.ms-selected)',
                            selectionSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selection.ms-selected';

                        that.qs1 = $selectableSearch.quicksearch(selectableSearchString)
                            .on('keydown', function (e) {
                                if (e.which === 40) {
                                    that.$selectableUl.focus();
                                    return false;
                                }
                            });

                        that.qs2 = $selectionSearch.quicksearch(selectionSearchString)
                            .on('keydown', function (e) {
                                if (e.which == 40) {
                                    that.$selectionUl.focus();
                                    return false;
                                }
                            });
                    },
                    afterSelect: function () {
                        this.qs1.cache();
                        this.qs2.cache();
                    },
                    afterDeselect: function () {
                        this.qs1.cache();
                        this.qs2.cache();
                    }
                });

                $('.ms-list .ms-elem-selectable.misEmpleos').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misEmpleos').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                $('.ms-list .ms-elem-selectable.misGrados').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misGrados').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                $('.ms-list .ms-elem-selectable.misFactores').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misFactores').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                $('.ms-list .ms-elem-selectable.misDiagnosticos').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misDiagnosticos').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                $('.ms-list .ms-elem-selectable.misSistemas').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misSistemas').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                $('.ms-list .ms-elem-selectable.misFunciones').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misFunciones').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                $('.ms-list .ms-elem-selectable.misEntrevistadores').each(function () {
                    $(this).css('display', 'none');
                    $(this).addClass('ms-hover');
                    $(this).addClass('ms-selected');

                });

                $('.ms-list .ms-elem-selection.misEntrevistadores').each(function () {
                    $(this).addClass('ms-selected');
                    $(this).css('display', '');
                });

                var tableD1 = $('#dataD1').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD2 = $('#dataD2').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD3 = $('#dataD3').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD4 = $('#dataD4').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD5 = $('#dataD5').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD6 = $('#dataD6').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD7 = $('#dataD7').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD8 = $('#dataD8').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });

                var tableD9 = $('#dataD9').DataTable({
                    "lengthChange": false,
                    "lengthMenu": [[15], [15]],
                    "searching": false
                });
            }

            //Relacionar selects
            {
                $('#provinciaPoliclinico').on('change', function () {
                    let html = '';
                    let provincia = $('#provinciaPoliclinico').val();
                    if (provincia == '0') {
                        $("option").remove('.inicioMunicipioPol');
                    } else {
                        $("#municipioPoliclinico").prop('disabled', false);
                        $("option").remove('.inicioMunicipioPol');
                        $("#inicioMunicipioPol").after('<option class="inicioMunicipioPol"></option>');

                        {% for municipio in  municipios %}
                        var idProvincia = '{{ municipio.Provincia.id }}';

                        if (idProvincia == provincia) {
                            var id = {{ municipio.id }};
                            var name = '{{ municipio.nombre }}';
                            html += '<option class="inicioMunicipioPol" value="' + id + '">' + name + '</option>';

                        }
                        {% endfor %}
                        $(".inicioMunicipioPol").replaceWith(html);
                    }
                });

                $('#municipioPoliclinico').on('change', function () {
                    let html = '';
                    let municipio = $('#municipioPoliclinico').val();
                    if (municipio == '0') {
                        $("option").remove('.inicioPol');
                    } else {
                        $("option").remove('.inicioPol');
                        $("#inicioPol").after('<option class="inicioPol"></option>');

                        var id = '0';
                        var name = 'Seleccione ...';
                        html += '<option class="inicioPol" value="' + id + '">' + name + '</option>';
                        {% for policlinico in  policlinicos %}
                        var idMunicipio = '{{ policlinico.municipio.id }}';

                        if (idMunicipio == municipio) {
                            id = {{ policlinico.id }};
                            name = '{{ policlinico.nombre }}';
                            html += '<option class="inicioPol" value="' + id + '">' + name + '</option>';

                        }
                        {% endfor %}
                        $(".inicioPol").replaceWith(html);
                        $('#policlinico').val('0');
                    }
                });

                $('#provinciaResidencia').on('change', function () {
                    let html = '';
                    let provincia = $('#provinciaResidencia').val();
                    if (provincia == '0') {
                        $("option").remove('.inicioMunResid');
                    } else {
                        $("option").remove('.inicioMunResid');
                        $("#inicioMunResid").after('<option class="inicioMunResid"></option>');

                        var id = '0';
                        var name = 'Seleccione ...';
                        html += '<option class="inicioMunResid" value="' + id + '">' + name + '</option>';

                        {% for municipio in  municipios %}
                        var idProvincia = '{{ municipio.Provincia.id }}';

                        if (idProvincia == provincia) {
                            id = {{ municipio.id }};
                            name = '{{ municipio.nombre }}';
                            html += '<option class="inicioMunResid" value="' + id + '">' + name + '</option>';

                        }
                        {% endfor %}
                        $(".inicioMunResid").replaceWith(html);
                        $('#municipioResidencia').val('0');
                    }
                });
            }

            //Acciones de persistencia
            {
                //--------- abandonar el formulario -----------------
                $('#btnCancelar').on('click', function () {
                    window.location.href = "{{ path('gestionarEncuestas') }}";
                });

                $('#btnGuardar').on('click', function () {

                    //Validaciones de datos generales
                    {
                        var hoy = '{{ "now"|date('Y-m-d') }}';

                        if ($("#edad").text() === '') {
                            alertify.alert('<strong>La edad es obligatoria, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#fechaNacimiento").text() == '') {
                            alertify.alert('<strong>La fecha de nacimeinto es obligatoria, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#sexo").text() == '') {
                            alertify.alert('<strong>El sexo es obligatorio es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#fechaValoracion").val() == '') {
                            alertify.alert('<strong>Debe seleccionar la fecha de valoración de la encuesta.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#fechaValoracion").val() > hoy) {
                            alertify.alert('<strong>Error: la fecha de valoración no puede ser mayor que la fecha actual.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#policlinico").val() === '0' || $("#policlinico").val() === '') {
                            alertify.alert('<strong>El policlínico es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#nombre").val() === '') {
                            alertify.alert('<strong>El nombre es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#primerApellido").val() === '') {
                            alertify.alert('<strong>El primer apellido es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#segundoApellido").val() === '') {
                            alertify.alert('<strong>El segundo apellido es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#provinciaResidencia").val() === '0') {
                            alertify.alert('<strong>La provincia de residencia es obligatoria, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#municipioResidencia").val() === '0' || $("#municipioResidencia").val() === '') {
                            alertify.alert('<strong>El municipio de residencia es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#genero").val() === '0') {
                            alertify.alert('<strong>El género es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if ($("#estadoCivil").val() === '0') {
                            alertify.alert('<strong>El estado civil es obligatorio, no puede quedar en blanco.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if (!($('#ms-multi-empleos li.ms-elem-selectable ').hasClass('ms-selected'))) {
                            alertify.alert('<strong>Debe seleccionar al menos un empleo.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                    }

                    //Validaciones del diagnóstico
                    {
                        if (!($('#ms-multi-grados li.ms-elem-selectable ').hasClass('ms-selected'))) {
                            alertify.alert('<strong>Debe seleccionar al menos un grado de independencia.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if (!($('#ms-multi-factores li.ms-elem-selectable ').hasClass('ms-selected'))) {
                            alertify.alert('<strong>Debe seleccionar al menos un factor de riesgo.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if (!($('#ms-multi-diagnosticos li.ms-elem-selectable ').hasClass('ms-selected'))) {
                            alertify.alert('<strong>Debe seleccionar al menos un diagnóstico médico.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if (!($('#ms-multi-sistemas li.ms-elem-selectable ').hasClass('ms-selected'))) {
                            alertify.alert('<strong>Debe seleccionar al menos un sistema afectado.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                        if (!($('#ms-multi-funciones li.ms-elem-selectable ').hasClass('ms-selected'))) {
                            alertify.alert('<strong>Debe seleccionar al menos una función afectada.</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Advertencia</h4>')
                                .set('label', 'Aceptar');
                            return false;
                        }
                    }

                    //Arreglo de preguntas
                    {
                        var preguntasD1 = [];
                        if (tableD1.rows().count() !== 0) {
                            $("#dataD1 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD1" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD1.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD2 = [];
                        if (tableD2.rows().count() !== 0) {
                            $("#dataD2 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD2" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD2.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD3 = [];
                        if (tableD3.rows().count() !== 0) {
                            $("#dataD3 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD3" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD3.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD4 = [];
                        if (tableD4.rows().count() !== 0) {
                            $("#dataD4 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD4" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD4.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD5 = [];
                        if (tableD5.rows().count() !== 0) {
                            $("#dataD5 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD5" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD5.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD6 = [];
                        if (tableD6.rows().count() !== 0) {
                            $("#dataD6 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD6" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD6.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD7 = [];
                        if (tableD7.rows().count() !== 0) {
                            $("#dataD7 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD7" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD7.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD8 = [];
                        if (tableD8.rows().count() !== 0) {
                            $("#dataD8 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD8" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD8.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }

                        var preguntasD9 = [];
                        if (tableD9.rows().count() !== 0) {
                            $("#dataD9 tbody tr").each(function (index) {
                                let filaId, filaCodigo, filaResultado;
                                $(this).children("td").each(function (index2) {
                                    switch (index2) {
                                        case 0:
                                            filaId = $(this).text();
                                            break;
                                        case 3:
                                            filaResultado = $("input:radio[name=radioD9" + filaId + "]:checked").val();
                                            break;
                                        case 4:
                                            filaCodigo = $(this).text();
                                            break;
                                    }
                                });
                                preguntasD9.push({
                                    idPregunta: parseInt(filaId),
                                    codigo: filaCodigo,
                                    resultado: parseInt(filaResultado)
                                });
                            });
                        }
                    }

                    //Capturar datos de los multiselect
                    {
                        var empleos = [];
                        var grados = [];
                        var factores = [];
                        var diagnosticos = [];
                        var sistemas = [];
                        var funciones = [];
                        var entrevistadores = [];

                        $('#ms-multi-empleos li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var texto = $(this).text();
                                empleos.push(texto);
                            }
                        });
                        $('#ms-multi-grados li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var valor = $(this).text();
                                grados.push(valor);
                            }
                        });
                        $('#ms-multi-factores li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var valor = $(this).text();
                                factores.push(valor);
                            }
                        });
                        $('#ms-multi-diagnosticos li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var valor = $(this).text();
                                diagnosticos.push(valor);
                            }
                        });
                        $('#ms-multi-sistemas li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var valor = $(this).text();
                                sistemas.push(valor);
                            }
                        });
                        $('#ms-multi-funciones li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var valor = $(this).text();
                                funciones.push(valor);
                            }
                        });
                        $('#ms-multi-entrevistadores li.ms-elem-selectable ').each(function () {

                            if ($(this).hasClass('ms-selected')) {

                                var valor = $(this).text();
                                entrevistadores.push(valor);
                            }
                        });
                    }

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPersona: '{{ encuesta.persona.id }}',
                        id: '{{ encuesta.id }}',
                        fechaValoracion: $("#fechaValoracion").val(),
                        policlinico: $("#policlinico").val(),
                        nombre: $("#nombre").val(),
                        primerApellido: $("#primerApellido").val(),
                        segundoApellido: $("#segundoApellido").val(),
                        fechaNacimiento: $("#fechaNacimiento").text(),
                        municipioResidencia: $("#municipioResidencia").val(),
                        edad: $("#edad").text(),
                        sexo: $("#sexo").text(),
                        genero: $("#genero").val(),
                        estadoCivil: $("#estadoCivil").val(),
                        empleos: empleos,
                        entrevistadores: entrevistadores,
                        grados: grados,
                        factores: factores,
                        diagnosticos: diagnosticos,
                        sistemas: sistemas,
                        funciones: funciones,
                        d1: preguntasD1,
                        d2: preguntasD2,
                        d3: preguntasD3,
                        d4: preguntasD4,
                        d5: preguntasD5,
                        d6: preguntasD6,
                        d7: preguntasD7,
                        d8: preguntasD8,
                        d9: preguntasD9,
                    };

                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("updateEncuesta") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data == 'ok') {

                            alertify.alert('<strong>La encuesta ha sido modificada correctamente</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarEncuestas') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });

                });
            }

        });
    </script>
{% endblock %}

